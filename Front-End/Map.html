<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="Include_Functions/jquery.html"></script>
    <script src="Include_Functions/functions.js"></script>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
    }
    #map{
        width: max-content;
        height: max-content;
    }
    .mapblock{
        position: relative;
    }
    .tiles{
        height: 100px;
        width: 100px;
        margin-bottom: -4px;
    }
    .tiles:hover{
        opacity: 0.5;
    }

    #elements{

    }
    #edit{
        margin: 5px;
    }
    #edit img{
        width: 50px;
        height: 50px;
        margin: 5px;
    }
    #selectTiles{
        width: 100vw;
        margin: 5px;
    }
    #selectTiles p{
        display: inline-block;
        width: 30px;
        height: 50px;
        text-align: center;
        position: relative;
        top: -20px;

    }
    #selectTiles img{
        width: 50px;
        height: 50px;
        margin: -2px 0px;
    }
    #selectTiles img:hover{
        opacity: 0.5;
    }
    #selectTiles2 img{
        width: 50px;
        height: 50px;
        margin: -2px 0px;
    }
    #selectTiles2 img:hover{
        opacity: 0.5;
    }
    .hitbox{
        display: inline-block;
        position: relative;
        left: -69px;
        color: red;
        width: 25px;
    }
</style>
<body onload="generateMap()">
<div id="map">

</div>
<div id="edit">
    <img id="saveimg" src="../Images/Street/Tileset_17.png">
</div>
<label for="changeCollisonMode">Collison Mode:</label>
<input id="changeCollisonMode" type="checkbox">
<div id="elements">
    <div id="selectTiles">

    </div>
    <div id="selectTiles2">

    </div>
</div>
<button id="GetArray">Get Map</button>
<div id="ArrayOutput">

</div>

<script>
    //let street = [
    //    5,6,31,32,36,37,38,39,44,45,48,49,50,51,52,53,55,56,58,66,68,79,80,81,82,83,84,87,88,89,89,81,92,93,94,95,96,97,100,101,102,103,104,107,108,111,112,115,116,120,121,124,125,128,129,133,134,137,137,138,141,142,146,147,150,165
    //]
    let street = [
        1,5,6,7,8,36,37,38,39,48,49,50,51,52,53,56,57,66,87,88,89,90,91,100,101,102,103,104,107,108,111,112,115,116,120,121,124,125,128,129,133,134,137,128,141,142,146,147,148,149,150,165
    ]

    let map = [
        "0px",
        "0px",
        {
            src: "../Images/Town/Tileset_1.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_2.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_3.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_16.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_17.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_29.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_30.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_31.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_53.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_71.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_44.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_73.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_66.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_57.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_71.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_114.png",
            collison: true
        },
        {
            src: "../Images/Town/Tileset_73.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_5.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_6.png",
            collison: false
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        },
        {
            src: "../Images/Street/Tileset_15.png",
            collison: true
        }
    ];


//tile = {
//    src: path+"Images/Street/Tileset_17.png",
//    collison: false
//}

//map.push(tile);

    function generateMap() {
        let mapmodel = "<div class='mapblock' style='top:"+map[0]+";left:"+map[1]+"'>"
        for ( let i=2; i<map.length; i++ ) {
            if ((i-1)%20 != 0){
                mapmodel += "<img class='tiles' id='"+i+"' src='"+map[i].src+"'>";
            } else {
                mapmodel += "<img class='tiles' id='"+i+"' src='"+map[i].src+"'><br>";
            }

        }
        mapmodel += "</div>";

        document.getElementById("map").innerHTML = mapmodel;

        $(".tiles").css("margin-right","0px");
        refrechbuttons();
    }
    function generateMapWithHitBox() {
        let mapmodel = "<div class='mapblock' style='top:"+map[0]+";left:"+map[1]+"'>"

        for ( let i=2; i<map.length; i++ ) {
            if ((i-1)%20 != 0){
                mapmodel += "<img class='tiles' id='"+i+"' src='"+map[i].src+"'><p class='hitbox'>"+map[i].collison+"</p>";
            } else {
                mapmodel += "<img class='tiles' id='"+i+"' src='"+map[i].src+"'><p class='hitbox'>"+map[i].collison+"</p><br>";
            }
        }
        mapmodel += "</div>";

        document.getElementById("map").innerHTML = mapmodel;

        $(".tiles").css("margin-right","-25px");
        refrechbuttons();
    }

    //for ( let i=0; i<street.length; i++ ) {
    //    $("#selectTiles").append("<img class='showTiles' src='../Images/Street/Tileset_"+ street[i] +".png'>")
    //}
    for ( let k=1; k<=169; k++ ) {
        if (k%13==0){
            $("#selectTiles").append("<img class='showTiles' src='../Images/Street/Tileset_"+ k +".png'><br>")
        } else {
            $("#selectTiles").append("<img class='showTiles' src='../Images/Street/Tileset_"+ k +".png'>")
        }
    }

    for ( let k=1; k<=224; k++ ) {
        if (k%14==0){
            $("#selectTiles2").append("<img class='showTiles' src='../Images/Town/Tileset_"+ k +".png'><br>")
        } else {
            $("#selectTiles2").append("<img class='showTiles' src='../Images/Town/Tileset_"+ k +".png'>")
        }
    }

    function refrechbuttons() {

        $(".tiles").click(function() {
            let id = parseInt($(this).attr('id'));
            if ($('#changeCollisonMode').prop('checked')){

                map[id].collison = !map[id].collison;

                generateMapWithHitBox();
            } else {

                map[id].src = $('#edit #saveimg').attr('src');

                generateMap();
            }
        });

        $(".showTiles").click(function() {
            let savesrc = $(this).attr('src');

            $('#edit #saveimg').attr('src', savesrc);
        });

        $("#saveimg").click(function() {
            $(this).attr('src', "../Images/Street/Tileset_17.png");
        });

        $('#changeCollisonMode').change(function() {
            if ($('#changeCollisonMode').prop('checked')){
                generateMapWithHitBox();
            } else {
                generateMap();
            }
        });

        $('#GetArray').click(function (){
            let output = "";
            let tiles = $(".tiles");
            for ( let i=0; i<tiles.length; i++ ) {
                let id = $(tiles[i]).attr('id');

                output += "{<br>";
                output += "    src: &quot;"+  map[id].src +"&quot;,<br>";
                output += "    collison: "+map[id].collison +"<br>";
                if (i == tiles.length-1){
                    output += "}";
                } else {
                    output += "},<br>";
                }

            }

            //let myJSON = JSON.stringify(output);

            $("#ArrayOutput").html(output);
        });
    }


</script>

</body>
</html>